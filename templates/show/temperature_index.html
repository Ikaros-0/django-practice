{% extends 'base.html' %}
{% load static %}
{% block content %}
<div class="row">
    <div class="col-md-12">
        <div id="Temperature"></div>
    </div>
</div>
<div>
  <p>test</p>
</div>
<script type="text/javascript">
    Highcharts.setOptions({
      global: {useUTC: false }
    });
    Highcharts.chart("Temperature", {
      chart: {
        renderTo:'Temperature',
        type: 'spline',
        events: {
        // current problem is the x and y are not same
          load: function () {
            var series = this.series[0];
            setInterval(function (){
              // alert(1),
              $.ajax({
                  url:'/show/get_temperature',
                  dataType:'json',
                  success: function(data) {
                      // alert(2);
                      var y = data.s1[data.s1.length-1];
                      series.addPoint([y.time,y.Temperature], true, true); 
                  },
              });
            },1000*5);
          },
        },
      },
      lang:{
        viewFullscreen:"全屏",
        printChart:"打印图表",
        downloadJPEG:"下载JPEG图片",
        downloadPDF:"下载PDF文件",
        downloadPNG:"下载PNG文件",
        downloadSVG:"下载SVG文件",
      },
      title: {text: 'Temperature'},
      xAxis: {type: "category",min: 5, max: 15},
      yAxis: {title: {text: 'Temperature'}},
      rangeSelector: {
            allButtonsEnabled: true,
            selected: 2
        },
      navigator:{
            enabled:true
        },
      scrollbar: {
        enabled: true
      },
      series: [{
                name: 'Temperature',
                data: {{res|safe}},
            }],
    });
</script>
{%endblock %}